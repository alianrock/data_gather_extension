<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æˆ‘çš„åº“ - Web Collector</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Serif+SC:wght@700&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--bg-main);
      height: 100vh;
      overflow: hidden;
      font-family: var(--font-main);
      color: var(--text-main);
    }

    /* å·¦å³å¸ƒå±€å®¹å™¨ */
    .app-layout {
      display: grid;
      grid-template-columns: 260px 1fr;
      height: 100vh;
      background: var(--bg-main);
    }

    /* å·¦ä¾§åˆ†ç±»å¯¼èˆª */
    .sidebar {
      background: var(--bg-card);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      backdrop-filter: var(--backdrop);
      z-index: 10;
      width: 260px;
    }

    .sidebar-brand {
      padding: 32px 24px 24px;
    }

    .sidebar-brand h1 {
      font-size: 20px;
      font-weight: 850;
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 12px;
      letter-spacing: -0.02em;
    }

    .sidebar-brand p {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 8px;
      font-weight: 600;
      opacity: 0.6;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .sidebar-stats {
      display: flex;
      padding: 0 24px;
      margin-bottom: 24px;
      gap: 16px;
    }

    .mini-stat {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: transparent;
      padding: 0;
      text-align: left;
      transition: var(--transition);
    }

    .mini-stat-value {
      font-size: 20px;
      font-weight: 850;
      color: var(--text-main);
      line-height: 1;
      margin-bottom: 4px;
    }

    .mini-stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      font-weight: 800;
      letter-spacing: 0.05em;
      opacity: 0.5;
    }

    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 0 16px 20px;
    }

    .sidebar-nav::-webkit-scrollbar {
      width: 4px;
    }

    .sidebar-nav::-webkit-scrollbar-thumb {
      background: transparent;
      border-radius: 10px;
    }

    .sidebar-nav:hover::-webkit-scrollbar-thumb {
      background: var(--border-color);
    }

    .nav-section {
      margin-bottom: 24px;
    }

    .nav-section-title {
      font-size: 10px;
      font-weight: 850;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 12px 8px 8px;
      opacity: 0.4;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* åˆ†ç±»å¯¼èˆªé¡¹ */
    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 9px 12px;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: var(--transition);
      margin-bottom: 2px;
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 600;
      position: relative;
    }

    .nav-item[draggable="true"] {
      cursor: move;
    }

    .nav-item.dragging {
      opacity: 0.5;
      transform: scale(0.98);
      background: var(--primary-light);
      border: 2px dashed var(--primary);
    }

    .nav-item.drag-over {
      border-top: 3px solid var(--primary);
      margin-top: 6px;
      background: var(--primary-light);
      animation: pulse-border 0.6s ease-in-out infinite;
    }

    @keyframes pulse-border {
      0%, 100% { border-top-color: var(--primary); }
      50% { border-top-color: var(--primary-hover); }
    }

    .drag-handle {
      opacity: 0;
      transition: var(--transition);
      color: var(--text-muted);
      display: flex;
      align-items: center;
      cursor: grab;
      padding: 2px;
    }

    .drag-handle:active {
      cursor: grabbing;
    }

    .nav-item:hover .drag-handle {
      opacity: 1;
      color: var(--primary);
    }

    .nav-item.dragging .drag-handle {
      opacity: 1;
      cursor: grabbing;
    }

    .nav-item:hover {
      background: var(--primary-light);
      color: var(--primary);
    }

    .nav-item.active {
      background: var(--primary-light);
      color: var(--primary);
      box-shadow: none;
    }

    .nav-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 20%;
      bottom: 20%;
      width: 3px;
      background: var(--primary);
      border-radius: 0 4px 4px 0;
    }

    .nav-item.active .nav-count {
      background: var(--primary);
      color: white;
    }

    .nav-icon {
      font-size: 16px;
      width: 20px;
      display: flex;
      justify-content: center;
      opacity: 0.8;
    }

    .nav-label {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .nav-count {
      font-size: 10px;
      background: var(--bg-main);
      color: var(--text-muted);
      padding: 2px 6px;
      border-radius: 6px;
      font-weight: 800;
      transition: var(--transition);
    }

    /* å­åˆ†ç±» */
    .nav-children {
      margin-left: 14px;
      margin-bottom: 4px;
      border-left: 1px solid var(--border-color);
      padding-left: 12px;
    }

    .nav-children .nav-item {
      font-size: 13px;
      padding: 7px 10px;
      font-weight: 500;
    }

    /* æ·»åŠ åˆ†ç±»æŒ‰é’® */
    .add-nav-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border: 1px dashed var(--border-color);
      background: transparent;
      border-radius: var(--radius-md);
      cursor: pointer;
      color: var(--text-muted);
      font-size: 12px;
      font-weight: 700;
      width: 100%;
      margin-top: 8px;
      transition: var(--transition);
    }

    .add-nav-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
    }

    .sidebar-footer {
      padding: 16px;
      border-top: 1px solid var(--border-color);
      background: var(--bg-card);
    }

    .sync-status {
      font-size: 10px;
      color: var(--text-muted);
      margin-bottom: 12px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      opacity: 0.5;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .sync-status::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--success);
      display: inline-block;
    }

    .sync-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .sync-btn {
      padding: 8px;
      border: 1px solid var(--border-color);
      background: var(--bg-main);
      border-radius: var(--radius-sm);
      font-size: 11px;
      font-weight: 750;
      cursor: pointer;
      color: var(--text-main);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .sync-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
    }

    .sync-btn-primary {
      grid-column: span 2;
      background: var(--primary);
      color: white;
      border: none;
      margin-top: 8px;
      padding: 10px;
    }

    .sync-btn-primary:hover {
      background: var(--primary-hover);
      color: white;
    }

    /* å³ä¾§ä¸»å†…å®¹åŒº */
    .main-content {
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .content-header {
      padding: 32px 40px;
      background: var(--bg-card);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      backdrop-filter: var(--backdrop);
      z-index: 5;
    }

    .content-title {
      font-size: 32px;
      font-weight: 850;
      color: var(--text-main);
      letter-spacing: -0.03em;
      line-height: 1.1;
    }

    .content-title-sub {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 600;
      margin-top: 8px;
      display: block;
    }

    .header-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      height: 40px;
      flex: 1;
      margin-left: 40px;
      justify-content: flex-end;
    }

    .search-wrapper {
      position: relative;
      height: 40px;
      width: 320px;
      transition: var(--transition);
    }

    .search-box {
      width: 100%;
      height: 100%;
      padding: 0 16px 0 40px;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      color: var(--text-main);
      background: var(--bg-main) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='2' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z' /%3E%3C/svg%3E") 12px center / 18px no-repeat;
      transition: var(--transition);
    }

    .search-box:focus {
      outline: none;
      border-color: var(--primary);
      background-color: var(--bg-card);
      box-shadow: 0 0 0 4px var(--primary-light);
    }

    .search-wrapper:focus-within {
      width: 420px;
    }

    .action-btn {
      width: auto; /* ç¡®ä¿æŒ‰é’®å®½åº¦ç”±å†…å®¹å†³å®š */
      padding: 0 16px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      border-radius: var(--radius-md);
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: var(--transition);
      height: 40px;
      white-space: nowrap;
    }

    /* é’ˆå¯¹ select å…ƒç´ çš„ç‰¹æ®Šå¤„ç† */
    select.action-btn {
      appearance: none;
      padding-right: 32px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 10px center;
      background-size: 14px;
    }

    .action-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
    }

    .view-controls {
      display: flex;
      background: var(--bg-main);
      padding: 3px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      height: 40px;
      align-items: center;
      gap: 2px;
    }

    .view-btn {
      width: 32px;
      height: 32px;
      border: 1px solid transparent;
      background: transparent;
      cursor: pointer;
      border-radius: calc(var(--radius-md) - 3px);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      transition: var(--transition);
    }

    .view-btn:hover {
      color: var(--primary);
    }

    .view-btn.active {
      background: var(--bg-card);
      box-shadow: var(--shadow-sm);
      color: var(--primary);
      border-color: var(--border-color);
    }

    .content-body {
      flex: 1;
      overflow-y: auto;
      padding: 40px;
      scroll-behavior: smooth;
    }

    /* ä¹¦ç­¾ç½‘æ ¼ */
    .bookmarks-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 28px;
      transition: var(--transition);
    }

    /* åˆ—è¡¨è§†å›¾æ¨¡å¼ */
    .bookmarks-grid.list-view {
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .bookmarks-grid.list-view .bookmark-card {
      flex-direction: row;
      height: 100px;
      align-items: center;
    }

    .bookmarks-grid.list-view .card-image {
      width: 140px;
      height: 100%;
      flex-shrink: 0;
    }

    .bookmarks-grid.list-view .card-content {
      padding: 12px 24px;
      flex-direction: row;
      align-items: center;
      gap: 20px;
    }

    .bookmarks-grid.list-view .card-title {
      flex: 1;
      margin-bottom: 0;
      -webkit-line-clamp: 1;
      font-size: 15px;
    }

    .bookmarks-grid.list-view .card-summary,
    .bookmarks-grid.list-view .card-url,
    .bookmarks-grid.list-view .card-category {
      display: none;
    }

    .bookmarks-grid.list-view .card-footer {
      margin-top: 0;
      padding-top: 0;
      border-top: none;
      width: auto;
    }

    .bookmark-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-color);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: var(--transition);
      backdrop-filter: var(--backdrop);
      height: 100%;
    }

    .bookmark-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }

    .card-image {
      height: 180px;
      background: var(--primary-light);
      overflow: hidden;
      position: relative;
    }

    .card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .bookmark-card:hover .card-image img {
      transform: scale(1.05);
    }

    .card-category {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--bg-card);
      padding: 6px 14px;
      border-radius: 100px;
      font-size: 11px;
      font-weight: 800;
      color: var(--primary);
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      z-index: 2;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .card-category:hover {
      background: var(--primary);
      color: white;
      transform: scale(1.05);
    }

    .card-content {
      padding: 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .card-title {
      font-size: 17px;
      font-weight: 800;
      color: var(--text-main);
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.4;
      letter-spacing: -0.01em;
    }

    .card-url {
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 16px;
      text-decoration: none;
      display: inline-block;
      opacity: 0.8;
    }

    .card-url:hover {
      opacity: 1;
      text-decoration: underline;
    }

    .card-summary {
      font-size: 14px;
      color: var(--text-muted);
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.6;
      flex: 1;
      margin-bottom: 12px;
    }

    /* å¡ç‰‡æ ‡ç­¾åŒºåŸŸ */
    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 16px;
      align-items: center;
    }

    .card-tag {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      background: var(--primary-light);
      color: var(--primary);
      border-radius: 6px;
      font-size: 11px;
      font-weight: 700;
      transition: var(--transition);
      cursor: default;
    }

    .card-tag:hover {
      background: var(--primary);
      color: white;
      transform: scale(1.05);
    }

    .card-tag-edit, .card-tag-add {
      display: inline-flex;
      align-items: center;
      padding: 4px 8px;
      background: transparent;
      border: 1px dashed var(--border-color);
      color: var(--text-muted);
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
    }

    .card-tag-edit:hover, .card-tag-add:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
    }

    .card-footer {
      padding-top: 16px;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-date {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .card-actions {
      display: flex;
      gap: 8px;
    }

    .btn-icon {
      width: 34px;
      height: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      background: var(--bg-card);
      cursor: pointer;
      color: var(--text-muted);
      transition: var(--transition);
    }

    .btn-icon:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
      transform: scale(1.1);
    }

    .btn-icon.delete:hover {
      border-color: var(--danger);
      color: var(--danger);
      background: #fff1f2;
    }

    /* ç©ºçŠ¶æ€ */
    .empty-state {
      padding: 120px 40px;
      text-align: center;
      max-width: 400px;
      margin: 0 auto;
    }

    .empty-icon {
      font-size: 72px;
      margin-bottom: 24px;
      filter: grayscale(1);
      opacity: 0.2;
    }

    .empty-title {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-main);
      margin-bottom: 12px;
    }

    .empty-desc {
      font-size: 15px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    /* åˆ†ç±»ç¼–è¾‘å¼¹çª— */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.visible {
      display: flex;
    }

    .modal {
      background: var(--bg-card);
      border-radius: var(--radius-md);
      width: 400px;
      max-width: 90vw;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--border-color);
    }

    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-main);
    }

    .modal-close {
      width: 28px;
      height: 28px;
      border: none;
      background: var(--bg-main);
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      color: var(--text-main);
    }

    .modal-body {
      padding: 24px;
    }

    .modal-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 6px;
    }

    .form-input {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      font-size: 14px;
      background: var(--bg-card);
      color: var(--text-main);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .modal-btn {
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .modal-btn-cancel {
      background: var(--bg-main);
      border: 1px solid var(--border-color);
      color: var(--text-muted);
    }

    .modal-btn-primary {
      background: var(--primary);
      border: none;
      color: white;
    }

    .modal-btn-danger {
      background: var(--danger);
      border: none;
      color: white;
    }

    /* AI æ ‡ç­¾äº‘ */
    .tag-cloud {
      margin-bottom: 32px;
      padding: 24px;
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-color);
      backdrop-filter: var(--backdrop);
    }

    .tag-cloud-title {
      font-size: 12px;
      font-weight: 800;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 16px;
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tag-item {
      padding: 6px 14px;
      background: var(--bg-main);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      cursor: pointer;
      transition: var(--transition);
    }

    .tag-item:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-light);
    }

    .tag-item.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* ä¾§è¾¹é¢„è§ˆæŠ½å±‰ */
    .reader-drawer {
      position: fixed;
      inset: 0;
      z-index: 2000;
      visibility: hidden;
      transition: visibility 0.3s;
    }

    .reader-drawer.visible {
      visibility: visible;
    }

    .drawer-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(4px);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .reader-drawer.visible .drawer-overlay {
      opacity: 1;
    }

    .drawer-content {
      position: absolute;
      top: 0;
      right: -600px;
      width: 600px;
      height: 100%;
      background: var(--bg-card);
      box-shadow: -10px 0 40px rgba(0,0,0,0.2);
      transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      flex-direction: column;
      backdrop-filter: var(--backdrop);
    }

    .reader-drawer.visible .drawer-content {
      right: 0;
    }

    .drawer-header {
      padding: 20px 32px;
      border-bottom: 1px solid var(--border-color);
      background: var(--bg-card);
    }

    .drawer-header-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .drawer-close-btn {
      padding: 8px 16px;
      border: 1px solid var(--border-color);
      background: var(--bg-main);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      color: var(--text-main);
    }

    .drawer-source-btn {
      color: var(--primary);
      text-decoration: none;
      font-size: 13px;
      font-weight: 700;
    }

    .drawer-body {
      flex: 1;
      overflow-y: auto;
      padding: 40px 60px;
    }

    .reader-header {
      margin-bottom: 40px;
    }

    .reader-header h1 {
      font-size: 32px;
      font-weight: 850;
      color: var(--text-main);
      line-height: 1.2;
      margin: 12px 0;
      letter-spacing: -0.02em;
    }

    .reader-meta {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .reader-summary {
      font-size: 16px;
      line-height: 1.8;
      color: var(--text-main);
      background: var(--primary-light);
      padding: 24px;
      border-radius: var(--radius-md);
      margin-bottom: 32px;
      white-space: pre-wrap;
    }

    .reader-main-text {
      font-size: 16px;
      line-height: 1.8;
      color: var(--text-main);
      white-space: pre-wrap;
    }

    /* æ—¶é—´çº¿è§†å›¾ */
    .timeline-container {
      position: relative;
      padding-left: 40px;
    }

    .timeline-container::before {
      content: '';
      position: absolute;
      left: 7px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--border-color);
    }

    .timeline-group {
      margin-bottom: 48px;
      position: relative;
    }

    .timeline-header {
      position: relative;
      margin-bottom: 24px;
    }

    .timeline-dot {
      position: absolute;
      left: -40px;
      top: 4px;
      width: 16px;
      height: 16px;
      background: var(--primary);
      border: 4px solid var(--bg-main);
      border-radius: 50%;
      z-index: 2;
    }

    .timeline-date {
      font-size: 18px;
      font-weight: 800;
      color: var(--text-main);
    }

    /* åˆ†ç±»æ“ä½œæŒ‰é’® */
    .nav-item-actions {
      display: none;
      gap: 2px;
    }

    .nav-item:hover .nav-item-actions {
      display: flex;
    }

    .nav-action {
      width: 22px;
      height: 22px;
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: 11px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-action:hover {
      background: rgba(0,0,0,0.1);
    }

    .nav-item.active .nav-action:hover {
      background: rgba(255,255,255,0.2);
    }

    /* åˆ†ç±»ç¼–è¾‘é€‰é¡¹ */
    .category-edit-option {
      padding: 12px;
      border: 2px solid var(--border-color);
      background: var(--bg-card);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      text-align: center;
    }

    .category-edit-option:hover {
      border-color: var(--primary);
      background: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    .category-edit-option.active {
      border-color: var(--primary);
      background: var(--primary-light);
      color: var(--primary);
    }

    .category-edit-option:disabled {
      cursor: not-allowed;
      opacity: 0.5;
      transform: none !important;
    }

    .category-edit-icon {
      font-size: 28px;
      line-height: 1;
    }

    .category-edit-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    @keyframes pulse-scale {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* é€šç”¨loading spinner */
    .loading-spinner {
      display: inline-block;
      width: 14px;
      height: 14px;
      border: 2px solid currentColor;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    .loading-spinner-white {
      border-color: white;
      border-top-color: transparent;
    }

    .loading-spinner-lg {
      width: 18px;
      height: 18px;
      border-width: 2.5px;
    }

    /* å…¨å±€åŠ è½½é®ç½© */
    .global-loading {
      position: fixed;
      inset: 0;
      background: var(--bg-main);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.3s ease;
    }

    .global-loading.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .global-loading-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-xl);
      border: 1px solid var(--border-color);
    }

    /* å³ä¸‹è§’åå°çŠ¶æ€æç¤º */
    .background-status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 9998;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
      pointer-events: none;
    }

    .background-status.visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .background-status-content {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      backdrop-filter: blur(10px);
      min-width: 200px;
    }

    .background-status-icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }

    .background-status-icon.syncing {
      width: 14px;
      height: 14px;
      border: 2px solid var(--primary);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    .background-status-icon.success {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--success);
      position: relative;
    }

    .background-status-icon.success::after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 10px;
      font-weight: bold;
    }

    .background-status-icon.warning {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: #f59e0b;
      position: relative;
    }

    .background-status-icon.warning::after {
      content: '!';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 12px;
      font-weight: bold;
    }

    .background-status-text {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      flex: 1;
    }

    @keyframes slideInRight {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOutRight {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(400px); opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- å…¨å±€åŠ è½½é®ç½© -->
  <div id="globalLoading" class="global-loading">
    <div class="global-loading-content">
      <div class="loading-spinner loading-spinner-lg" style="width: 48px; height: 48px; border-width: 4px; border-color: var(--primary); border-top-color: transparent;"></div>
      <p style="margin-top: 20px; font-size: 16px; font-weight: 600; color: var(--text-main);">æ­£åœ¨åŠ è½½çŸ¥è¯†åº“...</p>
      <p style="margin-top: 8px; font-size: 13px; color: var(--text-muted);" id="loadingProgress">åˆå§‹åŒ–ä¸­</p>
    </div>
  </div>

  <div class="app-layout">
    <!-- å·¦ä¾§åˆ†ç±»å¯¼èˆª -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <h1><span>ğŸ“¦</span> çŸ¥è¯†åº“</h1>
        <p>Your Digital Library</p>
      </div>

      <div class="sidebar-stats">
        <div class="mini-stat">
          <div class="mini-stat-value" id="totalCount">0</div>
          <div class="mini-stat-label">åº“æ€»é‡</div>
        </div>
        <div class="mini-stat">
          <div class="mini-stat-value" id="categoryCount">0</div>
          <div class="mini-stat-label">åˆ†ç±»</div>
        </div>
      </div>

      <nav class="sidebar-nav">
        <!-- å›ºå®šå¯¼èˆªåŒº -->
        <div class="nav-section">
          <div class="nav-section-title">æµè§ˆ</div>
          <div class="nav-item active" data-category="all" id="navAll">
            <span class="nav-icon">ğŸ“‹</span>
            <span class="nav-label">å…¨éƒ¨æ”¶è—</span>
            <span class="nav-count" id="allCountBadge">0</span>
          </div>
          <div class="nav-item" data-category="starred" id="navStarred">
            <span class="nav-icon">â­</span>
            <span class="nav-label">ç‰¹åˆ«å…³æ³¨</span>
          </div>
          <div class="nav-item" data-category="recent" id="navRecent">
            <span class="nav-icon">ğŸ•’</span>
            <span class="nav-label">æœ€è¿‘æ›´æ–°</span>
          </div>
        </div>

        <!-- åŠ¨æ€åˆ†ç±»åŒº -->
        <div class="nav-section">
          <div class="nav-section-title">
            <span>æˆ‘çš„åˆ†ç±»</span>
            <span style="font-size: 9px; opacity: 0.6; font-weight: 600;">æ‹–åŠ¨æ’åº</span>
          </div>
          <div id="sidebarNav">
            <!-- åŠ¨æ€ç”Ÿæˆåˆ†ç±»å¯¼èˆª -->
          </div>
          <button class="add-nav-btn" id="addCategoryBtn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 14px; height: 14px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            <span>åˆ›å»ºæ–°åˆ†ç±»</span>
          </button>
        </div>
      </nav>

      <div class="sidebar-footer">
        <div class="sync-status" id="syncStatus">åŒæ­¥çŠ¶æ€åŠ è½½ä¸­</div>
        <div class="sync-buttons">
          <button class="sync-btn" id="syncFromCloudBtn" title="ä»äº‘ç«¯æ‹‰å–">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 14px; height: 14px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
            </svg>
            <span>æ‹‰å–</span>
          </button>
          <button class="sync-btn" id="syncToCloudBtn" title="æ¨é€è‡³äº‘ç«¯">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 14px; height: 14px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
            </svg>
            <span>æ¨é€</span>
          </button>
          <button class="sync-btn sync-btn-primary" id="syncCategoriesBtn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width: 14px; height: 14px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
            </svg>
            <span>åŒæ­¥åˆ†ç±»æ¶æ„</span>
          </button>
        </div>
      </div>
    </aside>

    <!-- å³ä¾§ä¸»å†…å®¹ -->
    <main class="main-content">
      <header class="content-header">
        <div>
          <h2 class="content-title" id="currentCategoryTitle">å…¨éƒ¨æ”¶è—</h2>
          <span class="content-title-sub" id="filteredCount">0 æ¡ç»“æœ</span>
        </div>
        <div class="header-actions">
          <div class="view-controls">
            <button class="view-btn active" id="gridViewBtn" title="ç½‘æ ¼è§†å›¾">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 18px; height: 18px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25a2.25 2.25 0 0 1-2.25-2.25v-2.25Z" />
              </svg>
            </button>
            <button class="view-btn" id="listViewBtn" title="åˆ—è¡¨è§†å›¾">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 18px; height: 18px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
              </svg>
            </button>
            <button class="view-btn" id="timelineViewBtn" title="æ—¶é—´çº¿è§†å›¾">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 18px; height: 18px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
            </button>
          </div>
          <select id="sortSelect" class="action-btn">
            <option value="newest">æœ€æ–°æ·»åŠ </option>
            <option value="oldest">æœ€æ—©æ·»åŠ </option>
            <option value="title">æ ‡é¢˜ A-Z</option>
          </select>
          <div class="search-wrapper">
            <input type="text" id="searchBox" class="search-box" placeholder="æœç´¢æ ‡é¢˜ã€åŸŸåã€AI æ‘˜è¦...">
          </div>
          <button class="action-btn" id="reclassifyBtn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 16px; height: 16px;">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
            </svg>
            <span>é‡æ–°åˆ†ç±»</span>
          </button>
        </div>
      </header>

      <div class="content-body">
        <!-- AI æ ‡ç­¾äº‘åŒºåŸŸ -->
        <div id="tagCloud" class="tag-cloud hidden">
          <div class="tag-cloud-title">ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾</div>
          <div id="tagList" class="tag-list"></div>
        </div>

        <div id="bookmarksContainer">
        <!-- ä¹¦ç­¾åˆ—è¡¨ -->
        </div>
      </div>
    </main>
  </div>

  <!-- åˆ†ç±»ç¼–è¾‘å¼¹çª— -->
  <div class="modal-overlay" id="categoryModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">ç¼–è¾‘åˆ†ç±»</h3>
        <button class="modal-close" id="modalClose">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">åˆ†ç±»åç§°</label>
          <input type="text" class="form-input" id="categoryNameInput" placeholder="è¾“å…¥åˆ†ç±»åç§°">
        </div>
        <div class="form-group">
          <label class="form-label">å›¾æ ‡ (Emoji)</label>
          <input type="text" class="form-input" id="categoryIconInput" placeholder="ğŸ“" maxlength="2">
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-btn modal-btn-danger" id="modalDelete" style="margin-right: auto;">åˆ é™¤</button>
        <button class="modal-btn modal-btn-cancel" id="modalCancel">å–æ¶ˆ</button>
        <button class="modal-btn modal-btn-primary" id="modalSave">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <!-- åˆ†ç±»ç¼–è¾‘æ¨¡æ€æ¡† -->
  <div id="editCategoryModal" class="modal-overlay" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">ğŸ“‚ ä¿®æ”¹åˆ†ç±»</h3>
        <button class="modal-close" id="closeEditCategoryModal">âœ•</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">å½“å‰ä¹¦ç­¾</label>
          <div id="editCategoryBookmarkTitle" style="font-size: 14px; font-weight: 600; color: var(--text-main); margin-bottom: 16px; padding: 12px; background: var(--bg-main); border-radius: var(--radius-sm); border: 1px solid var(--border-color);"></div>
        </div>
        <div class="form-group">
          <label class="form-label">é€‰æ‹©æ–°åˆ†ç±»</label>
          <div id="editCategoryList" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; max-height: 400px; overflow-y: auto;">
            <!-- åŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
      </div>
      <div class="modal-footer" style="justify-content: center;">
        <button class="modal-btn modal-btn-cancel" id="cancelEditCategory">å–æ¶ˆ</button>
      </div>
    </div>
  </div>

  <!-- ä¾§è¾¹é¢„è§ˆæŠ½å±‰ (Zen Reading Mode) -->
  <div id="readerDrawer" class="reader-drawer">
    <div class="drawer-overlay"></div>
    <div class="drawer-content">
      <div class="drawer-header">
        <div class="drawer-header-actions">
          <button class="drawer-close-btn" id="closeDrawer">âœ• å…³é—­</button>
          <a href="#" target="_blank" id="drawerSourceLink" class="drawer-source-btn">è®¿é—®åŸç½‘é¡µ â†—</a>
        </div>
      </div>
      <div class="drawer-body">
        <header class="reader-header">
          <div id="readerCategory" class="badge">åˆ†ç±»</div>
          <h1 id="readerTitle">æ ‡é¢˜åŠ è½½ä¸­...</h1>
          <div id="readerMeta" class="reader-meta">æ¥æº Â· æ—¶é—´</div>
        </header>
        <div class="reader-content">
          <div id="readerSummary" class="reader-summary">AI æ‘˜è¦åŠ è½½ä¸­...</div>
          <hr class="divider">
          <div id="readerMainContent" class="reader-main-text">æ­£æ–‡å†…å®¹åŠ è½½ä¸­...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- å³ä¸‹è§’åå°çŠ¶æ€æç¤º -->
  <div id="backgroundStatus" class="background-status">
    <div class="background-status-content">
      <div class="background-status-icon"></div>
      <div class="background-status-text"></div>
    </div>
  </div>

  <script src="turso.js"></script>
  <script src="bookmarks.js"></script>
</body>
</html>
